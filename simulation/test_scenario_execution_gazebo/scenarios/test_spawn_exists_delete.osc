import osc.gazebo

scenario test_spawn_and_exists:
        
    test_obstacle: amr_object with:
        keep(it.model == 'scenario_execution_gazebo://models/box.sdf')

    do parallel:
        test_obstacle.spawn() with:
            keep(it.spawn_pose.position.x == 1m)
            keep(it.spawn_pose.position.y == 0m)
            keep(it.spawn_pose.position.z == 1m)
            keep(it.spawn_pose.orientation.roll == 0.0rad)
            keep(it.spawn_pose.orientation.pitch == 0.0rad)
            keep(it.spawn_pose.orientation.yaw == 0.0rad)
            keep(it.world_name == 'maze')
        test_case: serial:
            wait_for_5s: wait elapsed(5s)
            test: actor_exists() with:
                keep(it.name == 'test_obstacle')
                keep(it.world_name == 'maze')
            delete_obstacle: test_obstacle.delete() with:
                keep(it.world_name == 'maze')
            success: emit end
        time_out: serial:
            wait_for_30s: wait elapsed(30s)
            time_out_shutdown: emit fail
